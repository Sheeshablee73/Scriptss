local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")

local player = Players.LocalPlayer
local bombName = "Bomb"
local fastTeleportInterval = 0.5 -- Interval when holding the bomb
local slowTeleportInterval = 3 -- Interval when not holding the bomb
local lastTeleportTime = 0

local baseplateCFrames = {
    CFrame.new(40.2559242, 40.0485649, 2.01385713),
    CFrame.new(-1.16816998, 40.0485649, -37.4601097),
    CFrame.new(-40.3365402, 40.0485649, 2.37887311),
    CFrame.new(-1.32710671, 40.0485649, 42.4255104),
    CFrame.new(-1.27536607, 40.0485649, 2.10584497)
}

local baseplates = {}

local function createBaseplates()
    for _, cframe in ipairs(baseplateCFrames) do
        local baseplate = Instance.new("Part")
        baseplate.Size = Vector3.new(5, 1, 5)
        baseplate.CFrame = cframe
        baseplate.Anchored = true
        baseplate.BrickColor = BrickColor.new("Bright blue")
        baseplate.Parent = Workspace
        table.insert(baseplates, baseplate)
    end
end

createBaseplates()

local function isHoldingBomb()
    return player.Character and player.Character:FindFirstChild(bombName) ~= nil
end

local function teleportToRandomPlayer()
    local otherPlayers = Players:GetPlayers()
    if #otherPlayers < 2 then return end

    local randomPlayer = otherPlayers[math.random(1, #otherPlayers)]
    while randomPlayer == player or (randomPlayer.Character and randomPlayer.Character:FindFirstChild(bombName)) do
        randomPlayer = otherPlayers[math.random(1, #otherPlayers)]
    end

    local destination = randomPlayer.Character and randomPlayer.Character:FindFirstChild("HumanoidRootPart")
    local character = player.Character and player.Character:FindFirstChild("HumanoidRootPart")

    if destination and character then
        character.CFrame = destination.CFrame
    end
end

local function teleportToRandomBaseplate()
    local character = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
    if character and #baseplates > 0 then
        local randomBaseplate = baseplates[math.random(1, #baseplates)]
        character.CFrame = randomBaseplate.CFrame + Vector3.new(0, 3, 0)
    end
end

RunService.Heartbeat:Connect(function()
    local currentTime = tick()
    local currentTeleportInterval = isHoldingBomb() and fastTeleportInterval or slowTeleportInterval
    if currentTime - lastTeleportTime >= currentTeleportInterval then
        if isHoldingBomb() then
            teleportToRandomPlayer()
        else
            teleportToRandomBaseplate()
        end
        lastTeleportTime = currentTime
    end
end)

local function createCreditsGUI()
    local screenGui = Instance.new("ScreenGui")
    screenGui.Parent = player:WaitForChild("PlayerGui")

    local shadowColor = Color3.fromRGB(0, 0, 0)
    local mainTextColor = Color3.fromRGB(255, 255, 255)
    local text = "Credits to Skyee"

    local shadowLabel = Instance.new("TextLabel")
    shadowLabel.Size = UDim2.new(0, 200, 0, 50)
    shadowLabel.Position = UDim2.new(0.5, -100 + 2, 0.01, 2)
    shadowLabel.BackgroundTransparency = 1
    shadowLabel.TextScaled = true
    shadowLabel.Font = Enum.Font.SourceSansBold
    shadowLabel.TextColor3 = shadowColor
    shadowLabel.Text = text
    shadowLabel.Parent = screenGui

    local textLabel = Instance.new("TextLabel")
    textLabel.Size = UDim2.new(0, 200, 0, 50)
    textLabel.Position = UDim2.new(0.5, -100, 0.01, 0)
    textLabel.BackgroundTransparency = 1
    textLabel.TextScaled = true
    textLabel.Font = Enum.Font.SourceSansBold
    textLabel.TextColor3 = mainTextColor
    textLabel.Text = text
    textLabel.Parent = screenGui
end

createCreditsGUI()